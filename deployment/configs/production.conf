# Simple NTP Daemon Production Configuration
# Optimized for high-performance, production environments

[network]
# Network configuration
listen_address = 0.0.0.0
listen_port = 123
enable_ipv6 = true
max_clients = 10000
bind_interface = ""

# Performance tuning
receive_buffer_size = 26214400
send_buffer_size = 26214400
max_connections_per_second = 1000

[ntp_server]
# Server configuration
stratum = 2
reference_clock = "LOCAL"
reference_id = "SIMP"

# Upstream servers (use multiple for redundancy)
upstream_servers = [
    "pool.ntp.org",
    "time.nist.gov",
    "time.google.com",
    "time.cloudflare.com",
    "time.windows.com"
]

# Synchronization settings
sync_interval = 60
max_drift = 500
min_poll = 4
max_poll = 17

# Authentication (if enabled)
enable_authentication = false
auth_key_file = "/etc/simple-ntpd/keys"

[logging]
# Logging configuration
level = "INFO"
output = "file"
log_file = "/var/log/simple-ntpd/simple-ntpd.log"
max_file_size = "100MB"
max_files = 10
log_format = "json"
enable_syslog = true
syslog_facility = "daemon"

# Performance logging
log_performance_metrics = true
log_client_queries = false
log_sync_events = true

[security]
# Security settings
enable_authentication = false
allow_query_from = ["0.0.0.0/0"]
deny_query_from = []
enable_rate_limiting = true
max_queries_per_minute = 1000
enable_dns_validation = true

# Access control
trusted_networks = [
    "10.0.0.0/8",
    "172.16.0.0/12",
    "192.168.0.0/16"
]

[performance]
# Performance optimization
worker_threads = 8
max_packet_size = 2048
connection_timeout = 30
idle_timeout = 300
enable_connection_pooling = true
max_pool_size = 1000

# Memory management
max_memory_usage = "512MB"
enable_memory_pooling = true
garbage_collection_interval = 300

[monitoring]
# Monitoring and metrics
enable_metrics = true
metrics_port = 8080
metrics_address = "127.0.0.1"
enable_health_check = true
health_check_interval = 30

# SNMP integration (if available)
enable_snmp = false
snmp_community = "public"
snmp_port = 161

[maintenance]
# Maintenance settings
log_rotation_time = "daily"
max_log_age = "30d"
cleanup_interval = 3600
backup_config_on_change = true
config_backup_dir = "/var/backup/simple-ntpd"

# Statistics
enable_statistics = true
stats_retention_days = 90
stats_export_format = "json"
