# Enterprise Production NTP Server Configuration
# Optimized for large-scale enterprise environments

# =============================================================================
# SERVER IDENTIFICATION
# =============================================================================
server_name = enterprise-ntp-01
server_description = Enterprise NTP Server - Production Environment
server_location = datacenter-east
server_role = primary

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
listen_address = 0.0.0.0
listen_port = 123
enable_ipv6 = true
max_connections = 25000
connection_timeout = 20
bind_interfaces = eth0, eth1

# =============================================================================
# UPSTREAM SERVER CONFIGURATION
# =============================================================================
upstream_servers = time.nist.gov, time.google.com, time.cloudflare.com
backup_servers = time.windows.com, time.apple.com
server_selection = priority
failover_enabled = true
failover_timeout = 10

# =============================================================================
# NTP SERVER CONFIGURATION
# =============================================================================
stratum = 2
reference_id = ENTP
reference_clock = ENTERPRISE_REFERENCE
sync_interval = 32
timeout = 1000
local_clock = true
local_clock_precision = -7

# =============================================================================
# PERFORMANCE AND SCALABILITY
# =============================================================================
worker_threads = 12
thread_pool_size = 48
max_memory_usage = 2GB
connection_buffer_size = 12KB
enable_connection_pooling = true
enable_memory_pooling = true
enable_async_io = true
enable_response_cache = true
cache_ttl = 120
max_cache_size = 5000

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================
log_level = INFO
enable_console_logging = false
enable_file_logging = true
enable_syslog = true
log_file = /var/log/simple-ntpd/enterprise.log
log_file_max_size = 100MB
log_file_backups = 15
log_rotation = daily
log_structured = true
log_timestamp = true
log_thread_id = true
log_source_file = true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
allowed_networks = 10.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12
max_requests_per_minute = 60
enable_ddos_protection = true
max_connections_per_ip = 50
connection_rate_limit = 500

# =============================================================================
# HIGH AVAILABILITY
# =============================================================================
enable_clustering = true
cluster_mode = active_passive
cluster_nodes = enterprise-ntp-01, enterprise-ntp-02
failover_mode = automatic
health_check_enabled = true
health_check_interval = 15

# =============================================================================
# MONITORING AND METRICS
# =============================================================================
enable_health_check = true
health_check_port = 8080
health_check_path = /health
enable_metrics = true
metrics_port = 9090
metrics_path = /metrics
metrics_format = prometheus
metrics_interval = 15

# =============================================================================
# OPERATIONAL FEATURES
# =============================================================================
enable_config_reload = true
enable_backup = true
backup_interval = 1h
backup_retention = 7d
enable_service_discovery = true
service_discovery_backend = consul

# =============================================================================
# SYSTEM INTEGRATION
# =============================================================================
daemonize = true
pid_file = /var/run/simple-ntpd.pid
user = ntp
group = ntp
umask = 022
max_open_files = 32768
max_processes = 2048

# =============================================================================
# COMPLIANCE AND AUDIT
# =============================================================================
enable_compliance = true
enable_audit_trail = true
audit_trail_file = /var/log/simple-ntpd/audit.log
log_retention_days = 365
metrics_retention_days = 90

# =============================================================================
# PRODUCTION CHECKLIST
# =============================================================================
# [ ] Configuration tested in staging
# [ ] Monitoring and alerting configured
# [ ] Backup procedures tested
# [ ] Security review completed
# [ ] Performance testing performed
# [ ] Documentation complete
# [ ] Support team trained
# [ ] Incident response procedures in place
